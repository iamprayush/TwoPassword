{% extends 'base.html' %}

{% block title %}Create Password Entry{% endblock %}

{% load crispy_forms_tags %}

{% block content %}
<form method="post" class="from-group user-form" autocomplete="off">
  {% csrf_token %}
  {{ form|crispy }}
  <button type="button" class="btn btn-outline-info" onclick="generateRandomPassword()">
    Generate random password
  </button>
  <button type="submit" class="btn btn-primary">Create</button>
</form>

<script type="text/javascript">
  let generateRandomPassword = function() {
    // TODO: Make these settings configurable from the UI.
    let length = 16;
    let chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    let charsLength = chars.length;
    let password = "";
    for (let i = 0; i < length; i++) {
      password += chars[Math.floor(Math.random() * charsLength)];
    }
    $("#id_password").val(password);
  };
</script>

{% endblock %}
